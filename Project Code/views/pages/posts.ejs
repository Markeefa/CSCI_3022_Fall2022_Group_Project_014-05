<%- include ('../partials/header') %>
<%- include ('../partials/menu') %>

<style>
    body  {
      background-image: url("https://res.cloudinary.com/dot0ix9d8/image/upload/v1669849125/Test1/y6xccqs3uskm5mdb1kno.jpg");
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
    }
    </style>
    
<main>
    <div class="container">
        <h3 class="mt-3">Posts by <%= username %>: </h1> 
        <%
            var rows = '<div class="row mt-4">';
            var column = 1;
            var maxColumn = 2;
            var img = "";
            var link = "";
            var vote = "";
            var title = "";
            var contact = 'contact-popup';
 
            if (reviews) { 
                if (reviews[0]) {
                reviews.forEach(function (review) {
                    img = review.image_url;
                    link = '/item/' + review.thing_id;

                    rows += '<div class="col">';
                    rows += '<div class="card mb-3" style="max-width: 540px;"><div class="row mt-3 mb-3">';
                    rows += '<div class="col-md-4"><img src="' + img + '" class="img-fluid rounded-start"><a href="' + link + '" class="stretched-link""></a></div>';
                    rows += '<div class="col-md-5"><div class="card-body">';
                    rows += '<h5 class="card-title">' + review.title + '</h5>';
                    rows += '<p class="card-text">' + review.description + '</p>';
                    rows += '<p class="card-text"><small class="text-muted">Posted ' + review.month + '/' + review.day + '/' + review.year + '</small></p>'
                    rows += '</div></div>';
                    rows += '<div class="col-md-3">';
                    rows += '<a href="' + link + '" class="btn btn-primary mt-5">View Post</a>';
                    %>
                    <%- rows %>

                    <% rows = '</div></div></div></div>';
                    column += 1;
                    if (column > maxColumn) {
                        column = 1;
                        rows += '</div><div class="row mt-4">';
                    }
                })
                } else { %>
                    <h3 class="mt-5">No posts found. User may not exist.</h3>
                <%  } %>
                <%- rows %> 
            <% } %> 
        </div>
    </div>
</main>

<%- include ('../partials/footer') %>